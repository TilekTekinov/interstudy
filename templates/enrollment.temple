{% (def enr (args :enrollment)) %}
<h2>Student: {{ (args :fullname) }} &lt;{{ (args :email) }}&gt;</h2>
<h3>Please choose your courses</h3>
{% (when (args :error) %}
<div class="error bad box">{{ (args :error) }}</div>
{% ) %}
<form method='post' action='/enroll/{- (args :id) -}' class='table rows'>
{% (loop [i :range [1 7] :let [n (string "course-" i)]] %}
  <p>
    <label for='{{ n }}'>
      Course&nbsp;{{ i }}
    </label>
    <select name='{{ n }}' id='{{ n }}' type='text' required >
	{% (each {:code code :name name} (args :courses) %}
      <option value="{{ code }}" {- (if (= code (and enr (enr (keyword n)))) "selected") -}>{{ name }}</option>
	{% ) %}
	</select>
  </p>
{% ) %}
  <button>Enroll</button>
</form>

